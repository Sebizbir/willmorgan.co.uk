!function(e){"function"==typeof define&&define.amd?define(e):window.Blazy=e()}(function(){function e(e){if(!document.querySelectorAll){var o=document.createStyleSheet();document.querySelectorAll=function(e,t,n,r,i){for(i=document.all,t=[],e=e.replace(/\[for\b/gi,"[htmlFor").split(","),n=e.length;n--;){for(o.addRule(e[n],"k:v"),r=i.length;r--;)i[r].currentStyle.k&&t.push(i[r]);o.removeRule(0)}return t}}v=!0,m=[],d=e||{},d.error=d.error||!1,d.offset=d.offset||100,d.success=d.success||!1,d.selector=d.selector||".b-lazy",d.separator=d.separator||"|",d.container=d.container?document.querySelectorAll(d.container):!1,d.errorClass=d.errorClass||"b-error",d.breakpoints=d.breakpoints||!1,d.successClass=d.successClass||"b-loaded",d.src=u=d.src||"data-src",g=1<window.devicePixelRatio,k=l(n,25),y=l(i,50),i(),s(d.breakpoints,function(e){return e.width>=window.screen.width?(u=e.src,!1):void 0}),t()}function t(){r(d.selector),v&&(v=!1,d.container&&s(d.container,function(e){a(e,"scroll",k)}),a(window,"resize",y),a(window,"resize",k),a(window,"scroll",k)),n()}function n(){for(var t=0;p>t;t++){var n=m[t],o=n.getBoundingClientRect(),r=h+d.offset;(0<=o.left&&o.right<=f+d.offset&&(0<=o.top&&o.top<=r||o.bottom<=r&&o.bottom>=0-d.offset)||-1!==(" "+n.className+" ").indexOf(" "+d.successClass+" "))&&(e.prototype.load(n),m.splice(t,1),p--,t--)}0===p&&e.prototype.destroy()}function o(e){if(0<e.offsetWidth&&0<e.offsetHeight){var t=e.getAttribute(u)||e.getAttribute(d.src);if(t){var t=t.split(d.separator),n=t[g&&1<t.length?1:0],t=new Image;s(d.breakpoints,function(t){e.removeAttribute(t.src)}),e.removeAttribute(d.src),t.onerror=function(){d.error&&d.error(e,"invalid"),e.className=e.className+" "+d.errorClass},t.onload=function(){"img"===e.nodeName.toLowerCase()?e.src=n:e.style.backgroundImage='url("'+n+'")',e.className=e.className+" "+d.successClass,d.success&&d.success(e)},t.src=n}else d.error&&d.error(e,"missing"),e.className=e.className+" "+d.errorClass}}function r(e){e=document.querySelectorAll(e);for(var t=p=e.length;t--;m.unshift(e[t]));}function i(){h=window.innerHeight||document.documentElement.clientHeight,f=window.innerWidth||document.documentElement.clientWidth}function a(e,t,n){e.attachEvent?e.attachEvent&&e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)}function c(e,t,n){e.detachEvent?e.detachEvent&&e.detachEvent("on"+t,n):e.removeEventListener(t,n,!1)}function s(e,t){if(e&&t)for(var n=e.length,o=0;n>o&&!1!==t(e[o],o);o++);}function l(e,t){var n=0;return function(){var o=+new Date;t>o-n||(n=o,e.apply(m,arguments))}}var u,d,f,h,m,p,g,v,k,y;return e.prototype.revalidate=function(){t()},e.prototype.load=function(e){-1===(" "+e.className+" ").indexOf(" "+d.successClass+" ")&&o(e)},e.prototype.destroy=function(){d.container&&s(d.container,function(e){c(e,"scroll",k)}),c(window,"scroll",k),c(window,"resize",k),c(window,"resize",y),p=0,m.length=0,v=!0},e}),function(){"use strict";function e(t,o){function r(e,t){return function(){return e.apply(t,arguments)}}var i;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=t,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],c=this,s=0,l=a.length;l>s;s++)c[a[s]]=r(c[a[s]],c);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,o){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,o):r.call(t,e,n,o)},t.addEventListener=function(e,n,o){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),o):r.call(t,e,n,o)}),"function"==typeof t.onclick&&(i=t.onclick,t.addEventListener("click",function(e){i(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),i=o&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(o&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,o;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),o=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,i;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],o){if(i=window.getSelection(),i.rangeCount&&!i.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,c,s,l,u=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,i&&(l=e.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),c=u.tagName.toLowerCase(),"label"===c){if(t=this.findControl(u)){if(this.focus(u),n)return!1;u=t}}else if(this.needsFocus(u))return e.timeStamp-a>100||o&&window.top!==window&&"input"===c?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,e),o&&"select"===c||(this.targetElement=null,e.preventDefault()),!1);return o&&!r&&(s=u.fastClickScrollParent,s&&s.fastClickLastScrollTop!==s.scrollTop)?!0:(this.needsClick(u)||(e.preventDefault(),this.sendClick(u,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,o,r;if("undefined"==typeof window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction?!0:"none"===e.style.touchAction?!0:!1},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(){"use strict";var e={find:function(e,t){return t=t||document,[].slice.call(t.querySelectorAll(e))},findOne:function(t,n){var o=e.find(t,n);return o&&o[0]||null},closest:function(t,n){var o=n;do if(e.matches(t,o))return o;while((o=o.parentNode)&&o!=document)},matches:function(t,n){return"matches"in n?n.matches(t):e._oldMatches(n,t)},_oldMatches:function(e,t){for(var n=e.document||e.ownerDocument||document,o=n.querySelectorAll(t),r=0;o[r]&&o[r]!==e;)++r;return!!o[r]},delegate:function(t,n,o){var r,i=n.split(" ");if(i.length>1)for(r in i)e.delegate(t,i[r],o);else document.addEventListener(n,e._delegateListener(o,t))},_delegateListener:function(t,n){return function(o){var r=e.closest(n,o.target);r&&t(o,r)}},createFromHTML:function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}},t=function(e,t,n,o){ga("send","event",t,e,n,o),console.log("trackEvent",[].slice.call(arguments))};e.delegate(".js-ga-event","click",function(e,n){var o=n.getAttribute("data-ga-category"),r=n.getAttribute("data-ga-label")||"",i=n.getAttribute("data-ga-value")||"";t(e.type,o,r,i)});var n=function(o,r){++n.invokeCount;var i=e.findOne("figure",r),a=e.findOne("img",i),c=e.closest(".js-portfolio-container",r),s=e.findOne(".js-portfolio-fullscreen",c),l=e.findOne(".js-portfolio-fullscreen-target",s),u=e.createFromHTML('<img src="'+a.getAttribute("data-large")+'" class="img--large" />');l.innerHTML=i.outerHTML;var d=e.findOne("img",l);u.onload=function(){this.classList.add("b-loaded")},d.parentNode.insertBefore(u,d.nextSibling),l.offsetHeight,c.classList.add("state-portfolio--fullscreen"),t("click","portfolio-screenshot",a.getAttribute("alt"),n.invokeCount)};n.invokeCount=0;var o=function(e,t){e.target==t&&r(e,t)},r=function(t,n){var o=e.closest(".js-portfolio-container",n);o.classList.remove("state-portfolio--fullscreen")};e.delegate(".js-trigger-portfolio-fullscreen","click",n),e.delegate(".state-portfolio--fullscreen .js-portfolio-fullscreen","click",o),e.delegate(".js-portfolio-close","click",r);var i,a,c,s=e.find(".portfolio__screens img"),l='<div class="loader"></div>';for(c in s)i=s[c],i.setAttribute("data-src",i.getAttribute("src")),i.removeAttribute("srcset"),i.classList.add("img--loading"),i.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs="),i.parentNode.insertBefore(e.createFromHTML(l),i.nextSibling);var u=e.find(".ui-background-cover");for(c in u)a=u[c],a.setAttribute("data-src",a.style.backgroundImage);new Blazy({selector:".portfolio__screens img"});e.delegate(".js-smoothscroll","click",function(e,t){t.scrollIntoView&&(document.getElementById(t.href.split("#").pop()).scrollIntoView({behavior:"smooth",block:"start"}),e.preventDefault())}),FastClick.attach(document.body)}();